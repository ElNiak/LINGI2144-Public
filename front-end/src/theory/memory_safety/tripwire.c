// Old code
val = mem[i];
// New (rewritten) code
if(mem[i] == TRIPVAL) abort();
else val = mem[i];
//If you exceed the value, then you can attack !